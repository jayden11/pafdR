<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Processing and Analyzing Financial Data with R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Processing and Analyzing Financial Data with R">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Processing and Analyzing Financial Data with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="figs/CAPADigital_FinancialDataR.jpg" />
  <meta property="og:description" content="Processing and Analyzing Financial Data with R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Processing and Analyzing Financial Data with R" />
  
  <meta name="twitter:description" content="Processing and Analyzing Financial Data with R" />
  <meta name="twitter:image" content="figs/CAPADigital_FinancialDataR.jpg" />

<meta name="author" content="Marcelo S. Perlin (marcelo.perlin@ufrgs.br)">


<meta name="date" content="2017-05-01">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="Financial-data.html">
<link rel="next" href="importingInternet.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98297869-1', 'auto');
  ga('send', 'pageview');

</script>

  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Processing and Analyzing Financial Data with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="Introduction.html"><a href="Introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="Introduction.html"><a href="Introduction.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R</a></li>
<li class="chapter" data-level="1.2" data-path="Introduction.html"><a href="Introduction.html#why-choose-r"><i class="fa fa-check"></i><b>1.2</b> Why Choose R</a></li>
<li class="chapter" data-level="1.3" data-path="Introduction.html"><a href="Introduction.html#what-can-you-do-with-r-and-rstudio"><i class="fa fa-check"></i><b>1.3</b> What Can You Do With R and RStudio?</a></li>
<li class="chapter" data-level="1.4" data-path="Introduction.html"><a href="Introduction.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>1.4</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.5" data-path="Introduction.html"><a href="Introduction.html#resources-in-the-web"><i class="fa fa-check"></i><b>1.5</b> Resources in the Web</a></li>
<li class="chapter" data-level="1.6" data-path="Introduction.html"><a href="Introduction.html#structure-and-organization"><i class="fa fa-check"></i><b>1.6</b> Structure and Organization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basicoperations.html"><a href="basicoperations.html"><i class="fa fa-check"></i><b>2</b> Basic Operations in R</a><ul>
<li class="chapter" data-level="2.1" data-path="basicoperations.html"><a href="basicoperations.html#working-with-r"><i class="fa fa-check"></i><b>2.1</b> Working With R</a></li>
<li class="chapter" data-level="2.2" data-path="basicoperations.html"><a href="basicoperations.html#objects-in-r"><i class="fa fa-check"></i><b>2.2</b> Objects in R</a></li>
<li class="chapter" data-level="2.3" data-path="basicoperations.html"><a href="basicoperations.html#international-and-local-formats"><i class="fa fa-check"></i><b>2.3</b> International and Local Formats</a></li>
<li class="chapter" data-level="2.4" data-path="basicoperations.html"><a href="basicoperations.html#types-of-files-in-r"><i class="fa fa-check"></i><b>2.4</b> Types of Files in R</a></li>
<li class="chapter" data-level="2.5" data-path="basicoperations.html"><a href="basicoperations.html#explaining-the-rstudio-screen"><i class="fa fa-check"></i><b>2.5</b> Explaining the RStudio Screen</a></li>
<li class="chapter" data-level="2.6" data-path="basicoperations.html"><a href="basicoperations.html#running-scripts-from-rstudio"><i class="fa fa-check"></i><b>2.6</b> Running Scripts from RStudio</a></li>
<li class="chapter" data-level="2.7" data-path="basicoperations.html"><a href="basicoperations.html#testing-and-debugging-code"><i class="fa fa-check"></i><b>2.7</b> Testing and Debugging Code</a></li>
<li class="chapter" data-level="2.8" data-path="basicoperations.html"><a href="basicoperations.html#creating-simple-objects"><i class="fa fa-check"></i><b>2.8</b> Creating Simple Objects</a></li>
<li class="chapter" data-level="2.9" data-path="basicoperations.html"><a href="basicoperations.html#creating-vectors"><i class="fa fa-check"></i><b>2.9</b> Creating Vectors</a></li>
<li class="chapter" data-level="2.10" data-path="basicoperations.html"><a href="basicoperations.html#knowing-your-environment"><i class="fa fa-check"></i><b>2.10</b> Knowing Your Environment</a></li>
<li class="chapter" data-level="2.11" data-path="basicoperations.html"><a href="basicoperations.html#displaying-and-formatting-output"><i class="fa fa-check"></i><b>2.11</b> Displaying and Formatting Output</a><ul>
<li class="chapter" data-level="2.11.1" data-path="basicoperations.html"><a href="basicoperations.html#customizing-the-output"><i class="fa fa-check"></i><b>2.11.1</b> Customizing the Output</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="basicoperations.html"><a href="basicoperations.html#finding-the-size-of-objects"><i class="fa fa-check"></i><b>2.12</b> Finding the Size of Objects</a></li>
<li class="chapter" data-level="2.13" data-path="basicoperations.html"><a href="basicoperations.html#selecting-the-elements-of-an-atomic-vector"><i class="fa fa-check"></i><b>2.13</b> Selecting the Elements of an Atomic Vector</a></li>
<li class="chapter" data-level="2.14" data-path="basicoperations.html"><a href="basicoperations.html#removing-objects-from-the-memory"><i class="fa fa-check"></i><b>2.14</b> Removing Objects from the Memory</a></li>
<li class="chapter" data-level="2.15" data-path="basicoperations.html"><a href="basicoperations.html#displaying-and-setting-the-working-directory"><i class="fa fa-check"></i><b>2.15</b> Displaying and Setting the Working Directory</a></li>
<li class="chapter" data-level="2.16" data-path="basicoperations.html"><a href="basicoperations.html#cancelling-code-execution"><i class="fa fa-check"></i><b>2.16</b> Cancelling Code Execution</a></li>
<li class="chapter" data-level="2.17" data-path="basicoperations.html"><a href="basicoperations.html#code-comments"><i class="fa fa-check"></i><b>2.17</b> Code Comments</a></li>
<li class="chapter" data-level="2.18" data-path="basicoperations.html"><a href="basicoperations.html#looking-for-help"><i class="fa fa-check"></i><b>2.18</b> Looking for Help</a></li>
<li class="chapter" data-level="2.19" data-path="basicoperations.html"><a href="basicoperations.html#r-packages"><i class="fa fa-check"></i><b>2.19</b> R Packages</a><ul>
<li class="chapter" data-level="2.19.1" data-path="basicoperations.html"><a href="basicoperations.html#installing-packages-from-cran"><i class="fa fa-check"></i><b>2.19.1</b> Installing Packages from CRAN</a></li>
<li class="chapter" data-level="2.19.2" data-path="basicoperations.html"><a href="basicoperations.html#installing-packages-from-github"><i class="fa fa-check"></i><b>2.19.2</b> Installing Packages from Github</a></li>
<li class="chapter" data-level="2.19.3" data-path="basicoperations.html"><a href="basicoperations.html#loading-packages"><i class="fa fa-check"></i><b>2.19.3</b> Loading Packages</a></li>
<li class="chapter" data-level="2.19.4" data-path="basicoperations.html"><a href="basicoperations.html#upgrading-packages"><i class="fa fa-check"></i><b>2.19.4</b> Upgrading Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.20" data-path="basicoperations.html"><a href="basicoperations.html#using-code-completion-with-tab"><i class="fa fa-check"></i><b>2.20</b> Using Code Completion with <em>tab</em></a></li>
<li class="chapter" data-level="2.21" data-path="basicoperations.html"><a href="basicoperations.html#interacting-with-files-and-the-operating-system"><i class="fa fa-check"></i><b>2.21</b> Interacting with Files and the Operating System</a><ul>
<li class="chapter" data-level="2.21.1" data-path="basicoperations.html"><a href="basicoperations.html#listing-files-and-folders"><i class="fa fa-check"></i><b>2.21.1</b> Listing Files and Folders</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="BasicObjects.html"><a href="BasicObjects.html"><i class="fa fa-check"></i><b>3</b> Basic Object Classes</a><ul>
<li class="chapter" data-level="3.1" data-path="BasicObjects.html"><a href="BasicObjects.html#numeric-objects"><i class="fa fa-check"></i><b>3.1</b> <code>Numeric</code> Objects</a><ul>
<li class="chapter" data-level="3.1.1" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-and-manipulating-numeric-objects"><i class="fa fa-check"></i><b>3.1.1</b> Creating and Manipulating <code>numeric</code> Objects</a></li>
<li class="chapter" data-level="3.1.2" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-a-numeric-sequence"><i class="fa fa-check"></i><b>3.1.2</b> Creating a <code>numeric</code> Sequence</a></li>
<li class="chapter" data-level="3.1.3" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-vectors-with-repeated-elements"><i class="fa fa-check"></i><b>3.1.3</b> Creating Vectors with Repeated Elements</a></li>
<li class="chapter" data-level="3.1.4" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-vectors-with-random-numbers"><i class="fa fa-check"></i><b>3.1.4</b> Creating Vectors with Random Numbers</a></li>
<li class="chapter" data-level="3.1.5" data-path="BasicObjects.html"><a href="BasicObjects.html#accessing-the-elements-of-a-numeric-vector"><i class="fa fa-check"></i><b>3.1.5</b> Accessing the Elements of a <code>numeric</code> Vector</a></li>
<li class="chapter" data-level="3.1.6" data-path="BasicObjects.html"><a href="BasicObjects.html#modifying-and-removing-elements-of-a-numeric-vector"><i class="fa fa-check"></i><b>3.1.6</b> Modifying and Removing Elements of a <code>numeric</code> Vector</a></li>
<li class="chapter" data-level="3.1.7" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-groups-from-a-numeric-vector"><i class="fa fa-check"></i><b>3.1.7</b> Creating Groups from a <code>numeric</code> Vector</a></li>
<li class="chapter" data-level="3.1.8" data-path="BasicObjects.html"><a href="BasicObjects.html#other-functions-for-manipulating-numerical-vectors"><i class="fa fa-check"></i><b>3.1.8</b> Other Functions for Manipulating Numerical Vectors</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="BasicObjects.html"><a href="BasicObjects.html#character-objects"><i class="fa fa-check"></i><b>3.2</b> <code>Character</code> Objects</a><ul>
<li class="chapter" data-level="3.2.1" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-a-simple-character-object"><i class="fa fa-check"></i><b>3.2.1</b> Creating a Simple <code>character</code> Object</a></li>
<li class="chapter" data-level="3.2.2" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-structured-character-objects"><i class="fa fa-check"></i><b>3.2.2</b> Creating Structured <code>character</code> Objects</a></li>
<li class="chapter" data-level="3.2.3" data-path="BasicObjects.html"><a href="BasicObjects.html#character-constants"><i class="fa fa-check"></i><b>3.2.3</b> <code>character</code> Constants</a></li>
<li class="chapter" data-level="3.2.4" data-path="BasicObjects.html"><a href="BasicObjects.html#selecting-characters-of-a-text-object"><i class="fa fa-check"></i><b>3.2.4</b> Selecting Characters of a Text Object</a></li>
<li class="chapter" data-level="3.2.5" data-path="BasicObjects.html"><a href="BasicObjects.html#finding-and-replacing-characters-of-a-text"><i class="fa fa-check"></i><b>3.2.5</b> Finding and Replacing Characters of a Text</a></li>
<li class="chapter" data-level="3.2.6" data-path="BasicObjects.html"><a href="BasicObjects.html#splitting-text"><i class="fa fa-check"></i><b>3.2.6</b> Splitting Text</a></li>
<li class="chapter" data-level="3.2.7" data-path="BasicObjects.html"><a href="BasicObjects.html#finding-the-number-of-characters-in-a-text"><i class="fa fa-check"></i><b>3.2.7</b> Finding the Number of Characters in a Text</a></li>
<li class="chapter" data-level="3.2.8" data-path="BasicObjects.html"><a href="BasicObjects.html#generating-combinations-of-text"><i class="fa fa-check"></i><b>3.2.8</b> Generating Combinations of Text</a></li>
<li class="chapter" data-level="3.2.9" data-path="BasicObjects.html"><a href="BasicObjects.html#encoding-of-character-objects"><i class="fa fa-check"></i><b>3.2.9</b> Encoding of <code>character</code> Objects</a></li>
<li class="chapter" data-level="3.2.10" data-path="BasicObjects.html"><a href="BasicObjects.html#other-functions-for-manipulating-character"><i class="fa fa-check"></i><b>3.2.10</b> Other Functions for Manipulating <code>character</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="BasicObjects.html"><a href="BasicObjects.html#factor-objects"><i class="fa fa-check"></i><b>3.3</b> <code>Factor</code> Objects</a><ul>
<li class="chapter" data-level="3.3.1" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-factors"><i class="fa fa-check"></i><b>3.3.1</b> Creating <code>factors</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="BasicObjects.html"><a href="BasicObjects.html#modifying-factors"><i class="fa fa-check"></i><b>3.3.2</b> Modifying <code>factors</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="BasicObjects.html"><a href="BasicObjects.html#converting-factors-to-other-classes"><i class="fa fa-check"></i><b>3.3.3</b> Converting <code>factors</code> to Other Classes</a></li>
<li class="chapter" data-level="3.3.4" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-contingency-tables"><i class="fa fa-check"></i><b>3.3.4</b> Creating Contingency Tables</a></li>
<li class="chapter" data-level="3.3.5" data-path="BasicObjects.html"><a href="BasicObjects.html#other-functions-for-manipulating-factors"><i class="fa fa-check"></i><b>3.3.5</b> Other Functions for Manipulating <code>factors</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="BasicObjects.html"><a href="BasicObjects.html#logical-objects"><i class="fa fa-check"></i><b>3.4</b> <code>Logical</code> Objects</a><ul>
<li class="chapter" data-level="3.4.1" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-logical-objects"><i class="fa fa-check"></i><b>3.4.1</b> Creating <code>logical</code> Objects</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="BasicObjects.html"><a href="BasicObjects.html#date-and-time-objects"><i class="fa fa-check"></i><b>3.5</b> Date and Time Objects</a><ul>
<li class="chapter" data-level="3.5.1" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-simple-dates"><i class="fa fa-check"></i><b>3.5.1</b> Creating Simple Dates</a></li>
<li class="chapter" data-level="3.5.2" data-path="BasicObjects.html"><a href="BasicObjects.html#creating-a-sequence-of-dates"><i class="fa fa-check"></i><b>3.5.2</b> Creating a Sequence of <code>Dates</code></a></li>
<li class="chapter" data-level="3.5.3" data-path="BasicObjects.html"><a href="BasicObjects.html#operations-with-dates"><i class="fa fa-check"></i><b>3.5.3</b> Operations with <code>Dates</code></a></li>
<li class="chapter" data-level="3.5.4" data-path="BasicObjects.html"><a href="BasicObjects.html#dealing-with-time"><i class="fa fa-check"></i><b>3.5.4</b> Dealing with Time</a></li>
<li class="chapter" data-level="3.5.5" data-path="BasicObjects.html"><a href="BasicObjects.html#customizing-the-output-format-of-dates-and-times"><i class="fa fa-check"></i><b>3.5.5</b> Customizing the Output Format of Dates and Times</a></li>
<li class="chapter" data-level="3.5.6" data-path="BasicObjects.html"><a href="BasicObjects.html#find-the-current-date-and-time"><i class="fa fa-check"></i><b>3.5.6</b> Find the Current Date and Time</a></li>
<li class="chapter" data-level="3.5.7" data-path="BasicObjects.html"><a href="BasicObjects.html#other-functions-for-manipulating-dates-and-time"><i class="fa fa-check"></i><b>3.5.7</b> Other Functions for Manipulating Dates and Time</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="BasicObjects.html"><a href="BasicObjects.html#missing-data---na-not-available"><i class="fa fa-check"></i><b>3.6</b> Missing Data - <code>NA</code> (<em>Not available</em>)</a><ul>
<li class="chapter" data-level="3.6.1" data-path="BasicObjects.html"><a href="BasicObjects.html#defining-na-values"><i class="fa fa-check"></i><b>3.6.1</b> Defining <code>NA</code> Values</a></li>
<li class="chapter" data-level="3.6.2" data-path="BasicObjects.html"><a href="BasicObjects.html#finding-and-replacing-na"><i class="fa fa-check"></i><b>3.6.2</b> Finding and Replacing <code>NA</code></a></li>
<li class="chapter" data-level="3.6.3" data-path="BasicObjects.html"><a href="BasicObjects.html#other-useful-functions-for-treating-na"><i class="fa fa-check"></i><b>3.6.3</b> Other Useful Functions for Treating <code>NA</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html"><i class="fa fa-check"></i><b>4</b> Data Structure Objects</a><ul>
<li class="chapter" data-level="4.1" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#lists"><i class="fa fa-check"></i><b>4.1</b> <code>Lists</code></a><ul>
<li class="chapter" data-level="4.1.1" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#creating-lists"><i class="fa fa-check"></i><b>4.1.1</b> Creating <code>lists</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#accessing-the-elements-of-a-list"><i class="fa fa-check"></i><b>4.1.2</b> Accessing the Elements of a <code>list</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#adding-and-removing-elements-from-a-list"><i class="fa fa-check"></i><b>4.1.3</b> Adding and Removing Elements from a <code>list</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#processing-the-elements-of-a-list"><i class="fa fa-check"></i><b>4.1.4</b> Processing the Elements of a <code>list</code></a></li>
<li class="chapter" data-level="4.1.5" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#other-functions-for-manipulating-lists"><i class="fa fa-check"></i><b>4.1.5</b> Other Functions for Manipulating <code>lists</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#matrices"><i class="fa fa-check"></i><b>4.2</b> <code>Matrices</code></a><ul>
<li class="chapter" data-level="4.2.1" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#selecting-elements-from-a-matrix"><i class="fa fa-check"></i><b>4.2.1</b> Selecting Elements from a <code>matrix</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#other-useful-functions-for-manipulating-matrices"><i class="fa fa-check"></i><b>4.2.2</b> Other Useful Functions for Manipulating Matrices</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#dataframes"><i class="fa fa-check"></i><b>4.3</b> <code>Dataframes</code></a><ul>
<li class="chapter" data-level="4.3.1" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#creating-dataframes"><i class="fa fa-check"></i><b>4.3.1</b> Creating <code>dataframes</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#accessing-information-from-a-dataframe"><i class="fa fa-check"></i><b>4.3.2</b> Accessing Information from a <code>dataframe</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#modifying-a-dataframe"><i class="fa fa-check"></i><b>4.3.3</b> Modifying a <code>dataframe</code></a></li>
<li class="chapter" data-level="4.3.4" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#sorting-a-dataframe"><i class="fa fa-check"></i><b>4.3.4</b> Sorting a <code>dataframe</code></a></li>
<li class="chapter" data-level="4.3.5" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#combining-and-aggregating-dataframes"><i class="fa fa-check"></i><b>4.3.5</b> Combining and Aggregating <code>dataframes</code></a></li>
<li class="chapter" data-level="4.3.6" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#reporting-a-dataframe-table"><i class="fa fa-check"></i><b>4.3.6</b> Reporting a <code>Dataframe</code> Table</a></li>
<li class="chapter" data-level="4.3.7" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#the-format-of-the-dataframe-long-and-wide"><i class="fa fa-check"></i><b>4.3.7</b> The Format of the <code>dataframe</code> (<em>long</em> and <em>wide</em>)</a></li>
<li class="chapter" data-level="4.3.8" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#extensions-of-the-dataframe-class"><i class="fa fa-check"></i><b>4.3.8</b> Extensions of the <code>dataframe</code> Class</a></li>
<li class="chapter" data-level="4.3.9" data-path="DataStructureObjects.html"><a href="DataStructureObjects.html#other-useful-functions-for-handling-dataframes"><i class="fa fa-check"></i><b>4.3.9</b> Other Useful Functions for Handling <code>dataframes</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Financial-data.html"><a href="Financial-data.html"><i class="fa fa-check"></i><b>5</b> Financial Data and Common Operations</a><ul>
<li class="chapter" data-level="5.1" data-path="Financial-data.html"><a href="Financial-data.html#data-from-financial-markets"><i class="fa fa-check"></i><b>5.1</b> Data from Financial Markets</a><ul>
<li class="chapter" data-level="5.1.1" data-path="Financial-data.html"><a href="Financial-data.html#calculating-returns-for-a-single-asset"><i class="fa fa-check"></i><b>5.1.1</b> Calculating Returns for a Single Asset</a></li>
<li class="chapter" data-level="5.1.2" data-path="Financial-data.html"><a href="Financial-data.html#calculating-returns-for-a-portfolio"><i class="fa fa-check"></i><b>5.1.2</b> Calculating Returns for a Portfolio</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Financial-data.html"><a href="Financial-data.html#data-from-the-financial-evaluation-of-projects"><i class="fa fa-check"></i><b>5.2</b> Data from the Financial Evaluation of Projects</a></li>
<li class="chapter" data-level="5.3" data-path="Financial-data.html"><a href="Financial-data.html#data-from-financial-statements"><i class="fa fa-check"></i><b>5.3</b> Data from Financial Statements</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="importing.html"><a href="importing.html"><i class="fa fa-check"></i><b>6</b> Importing and Exporting Data from Local Files</a><ul>
<li class="chapter" data-level="6.1" data-path="importing.html"><a href="importing.html#importing-data-from-local-files"><i class="fa fa-check"></i><b>6.1</b> Importing Data from Local Files</a><ul>
<li class="chapter" data-level="6.1.1" data-path="importing.html"><a href="importing.html#importing-data-from-a-.csv-file-comma-separated-values"><i class="fa fa-check"></i><b>6.1.1</b> Importing Data from a <em>.csv</em> File (<em>comma separated values</em>)</a></li>
<li class="chapter" data-level="6.1.2" data-path="importing.html"><a href="importing.html#importing-data-from-an-excel-file"><i class="fa fa-check"></i><b>6.1.2</b> Importing Data from an <em>Excel</em> File</a></li>
<li class="chapter" data-level="6.1.3" data-path="importing.html"><a href="importing.html#importing-data-from-a-.rdata-file"><i class="fa fa-check"></i><b>6.1.3</b> Importing Data from a <em>.RData</em> File</a></li>
<li class="chapter" data-level="6.1.4" data-path="importing.html"><a href="importing.html#importing-data-from-sqlite"><i class="fa fa-check"></i><b>6.1.4</b> Importing Data from SQLITE</a></li>
<li class="chapter" data-level="6.1.5" data-path="importing.html"><a href="importing.html#importing-data-from-a-text-file"><i class="fa fa-check"></i><b>6.1.5</b> Importing Data from a Text File</a></li>
<li class="chapter" data-level="6.1.6" data-path="importing.html"><a href="importing.html#other-file-formats"><i class="fa fa-check"></i><b>6.1.6</b> Other File Formats</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="importing.html"><a href="importing.html#exporting-to-local-file"><i class="fa fa-check"></i><b>6.2</b> Exporting to Local File</a><ul>
<li class="chapter" data-level="6.2.1" data-path="importing.html"><a href="importing.html#exporting-data-to-a-.csv-file"><i class="fa fa-check"></i><b>6.2.1</b> Exporting Data to a <em>.csv</em> File</a></li>
<li class="chapter" data-level="6.2.2" data-path="importing.html"><a href="importing.html#exporting-data-to-a-rdata-file"><i class="fa fa-check"></i><b>6.2.2</b> Exporting Data to a <em>RData</em> File</a></li>
<li class="chapter" data-level="6.2.3" data-path="importing.html"><a href="importing.html#exporting-data-to-an-excel-file"><i class="fa fa-check"></i><b>6.2.3</b> Exporting Data to an Excel File</a></li>
<li class="chapter" data-level="6.2.4" data-path="importing.html"><a href="importing.html#exporting-data-to-a-text-file"><i class="fa fa-check"></i><b>6.2.4</b> Exporting Data to a Text File</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="importingInternet.html"><a href="importingInternet.html"><i class="fa fa-check"></i><b>7</b> Importing Financial Data from the Internet</a><ul>
<li class="chapter" data-level="7.1" data-path="importingInternet.html"><a href="importingInternet.html#cran-packages"><i class="fa fa-check"></i><b>7.1</b> CRAN Packages</a><ul>
<li class="chapter" data-level="7.1.1" data-path="importingInternet.html"><a href="importingInternet.html#package-quantmod"><i class="fa fa-check"></i><b>7.1.1</b> Package <code>quantmod</code></a></li>
<li class="chapter" data-level="7.1.2" data-path="importingInternet.html"><a href="importingInternet.html#package-batchgetsymbols"><i class="fa fa-check"></i><b>7.1.2</b> Package <code>BatchGetSymbols</code></a></li>
<li class="chapter" data-level="7.1.3" data-path="importingInternet.html"><a href="importingInternet.html#package-finreportr"><i class="fa fa-check"></i><b>7.1.3</b> Package <code>finreportr</code></a></li>
<li class="chapter" data-level="7.1.4" data-path="importingInternet.html"><a href="importingInternet.html#package-tidyquant"><i class="fa fa-check"></i><b>7.1.4</b> Package <code>tidyquant</code></a></li>
<li class="chapter" data-level="7.1.5" data-path="importingInternet.html"><a href="importingInternet.html#package-gethfdata"><i class="fa fa-check"></i><b>7.1.5</b> Package <code>GetHFData</code></a></li>
<li class="chapter" data-level="7.1.6" data-path="importingInternet.html"><a href="importingInternet.html#package-ustyc"><i class="fa fa-check"></i><b>7.1.6</b> Package <code>ustyc</code></a></li>
<li class="chapter" data-level="7.1.7" data-path="importingInternet.html"><a href="importingInternet.html#quandl"><i class="fa fa-check"></i><b>7.1.7</b> Package <code>Quandl</code></a></li>
<li class="chapter" data-level="7.1.8" data-path="importingInternet.html"><a href="importingInternet.html#package-rbitcoin"><i class="fa fa-check"></i><b>7.1.8</b> Package <code>Rbitcoin</code></a></li>
<li class="chapter" data-level="7.1.9" data-path="importingInternet.html"><a href="importingInternet.html#other-packages"><i class="fa fa-check"></i><b>7.1.9</b> Other Packages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="importingInternet.html"><a href="importingInternet.html#accessing-data-from-web-pages-webscraping"><i class="fa fa-check"></i><b>7.2</b> Accessing Data from Web Pages (<em>webscraping</em>)</a><ul>
<li class="chapter" data-level="7.2.1" data-path="importingInternet.html"><a href="importingInternet.html#scraping-the-components-of-the-sp500-index-from-wikipedia"><i class="fa fa-check"></i><b>7.2.1</b> Scraping the Components of the SP500 Index from Wikipedia</a></li>
<li class="chapter" data-level="7.2.2" data-path="importingInternet.html"><a href="importingInternet.html#scraping-the-website-of-the-reserve-bank-of-australia"><i class="fa fa-check"></i><b>7.2.2</b> Scraping the Website of the Reserve Bank of Australia</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Figures.html"><a href="Figures.html"><i class="fa fa-check"></i><b>8</b> Creating and Saving Figures with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="8.1" data-path="Figures.html"><a href="Figures.html#using-graphic-windows"><i class="fa fa-check"></i><b>8.1</b> Using Graphic Windows</a></li>
<li class="chapter" data-level="8.2" data-path="Figures.html"><a href="Figures.html#creating-figures-with-function-qplot"><i class="fa fa-check"></i><b>8.2</b> Creating Figures with Function <code>qplot</code></a></li>
<li class="chapter" data-level="8.3" data-path="Figures.html"><a href="Figures.html#ggplot"><i class="fa fa-check"></i><b>8.3</b> Creating Figures with Function <code>ggplot</code></a><ul>
<li class="chapter" data-level="8.3.1" data-path="Figures.html"><a href="Figures.html#using-themes"><i class="fa fa-check"></i><b>8.3.1</b> Using Themes</a></li>
<li class="chapter" data-level="8.3.2" data-path="Figures.html"><a href="Figures.html#creating-panels-with-facet_wrap"><i class="fa fa-check"></i><b>8.3.2</b> Creating Panels with <code>facet_wrap</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="Figures.html"><a href="Figures.html#using-pipelines-for-data-analysis-and-figures"><i class="fa fa-check"></i><b>8.4</b> Using Pipelines for Data Analysis and Figures</a></li>
<li class="chapter" data-level="8.5" data-path="Figures.html"><a href="Figures.html#creating-statistical-graphics"><i class="fa fa-check"></i><b>8.5</b> Creating Statistical Graphics</a><ul>
<li class="chapter" data-level="8.5.1" data-path="Figures.html"><a href="Figures.html#creating-histograms"><i class="fa fa-check"></i><b>8.5.1</b> Creating Histograms</a></li>
<li class="chapter" data-level="8.5.2" data-path="Figures.html"><a href="Figures.html#creating-boxplot-figures"><i class="fa fa-check"></i><b>8.5.2</b> Creating <em>boxplot</em> Figures</a></li>
<li class="chapter" data-level="8.5.3" data-path="Figures.html"><a href="Figures.html#creating-qq-plots"><i class="fa fa-check"></i><b>8.5.3</b> Creating <em>QQ</em> Plots</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="Figures.html"><a href="Figures.html#saving-graphics-to-a-file"><i class="fa fa-check"></i><b>8.6</b> Saving Graphics to a File</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>9</b> Programming and Data Analysis with R</a><ul>
<li class="chapter" data-level="9.1" data-path="programming.html"><a href="programming.html#creating-functions"><i class="fa fa-check"></i><b>9.1</b> Creating Functions</a></li>
<li class="chapter" data-level="9.2" data-path="programming.html"><a href="programming.html#using-loops-for"><i class="fa fa-check"></i><b>9.2</b> Using Loops (<code>for</code>)</a></li>
<li class="chapter" data-level="9.3" data-path="programming.html"><a href="programming.html#conditional-statements-if-else-switch"><i class="fa fa-check"></i><b>9.3</b> Conditional Statements (<code>if</code>, <code>else</code>, <code>switch</code>)</a></li>
<li class="chapter" data-level="9.4" data-path="programming.html"><a href="programming.html#using-apply-functions"><i class="fa fa-check"></i><b>9.4</b> Using <code>apply</code> Functions</a><ul>
<li class="chapter" data-level="9.4.1" data-path="programming.html"><a href="programming.html#using-lapply"><i class="fa fa-check"></i><b>9.4.1</b> Using <code>lapply</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="programming.html"><a href="programming.html#using-sapply"><i class="fa fa-check"></i><b>9.4.2</b> Using <code>sapply</code></a></li>
<li class="chapter" data-level="9.4.3" data-path="programming.html"><a href="programming.html#using-tapply"><i class="fa fa-check"></i><b>9.4.3</b> Using <code>tapply</code></a></li>
<li class="chapter" data-level="9.4.4" data-path="programming.html"><a href="programming.html#using-mapply"><i class="fa fa-check"></i><b>9.4.4</b> Using <code>mapply</code></a></li>
<li class="chapter" data-level="9.4.5" data-path="programming.html"><a href="programming.html#using-apply"><i class="fa fa-check"></i><b>9.4.5</b> Using <code>apply</code></a></li>
<li class="chapter" data-level="9.4.6" data-path="programming.html"><a href="programming.html#using-by"><i class="fa fa-check"></i><b>9.4.6</b> Using <code>by</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="programming.html"><a href="programming.html#data-manipulation-with-package-dplyr"><i class="fa fa-check"></i><b>9.5</b> Data Manipulation with Package <code>dplyr</code></a><ul>
<li class="chapter" data-level="9.5.1" data-path="programming.html"><a href="programming.html#manipulating-a-dataframe-with-dplyr"><i class="fa fa-check"></i><b>9.5.1</b> Manipulating a <code>dataframe</code> with <code>dplyr</code></a></li>
<li class="chapter" data-level="9.5.2" data-path="programming.html"><a href="programming.html#the-pipeline-operator"><i class="fa fa-check"></i><b>9.5.2</b> The Pipeline Operator (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="9.5.3" data-path="programming.html"><a href="programming.html#simple-group-operations-with-dplyr"><i class="fa fa-check"></i><b>9.5.3</b> Simple Group Operations with <code>dplyr</code></a></li>
<li class="chapter" data-level="9.5.4" data-path="programming.html"><a href="programming.html#complex-group-operations-with-dplyr"><i class="fa fa-check"></i><b>9.5.4</b> Complex Group Operations with <code>dplyr</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="models.html"><a href="models.html"><i class="fa fa-check"></i><b>10</b> Financial Econometrics with R</a><ul>
<li class="chapter" data-level="10.1" data-path="models.html"><a href="models.html#linear-models-ols"><i class="fa fa-check"></i><b>10.1</b> Linear Models (OLS)</a><ul>
<li class="chapter" data-level="10.1.1" data-path="models.html"><a href="models.html#simulating-a-linear-model"><i class="fa fa-check"></i><b>10.1.1</b> Simulating a Linear Model</a></li>
<li class="chapter" data-level="10.1.2" data-path="models.html"><a href="models.html#estimating-ols"><i class="fa fa-check"></i><b>10.1.2</b> Estimating a Linear Model</a></li>
<li class="chapter" data-level="10.1.3" data-path="models.html"><a href="models.html#testing-ols"><i class="fa fa-check"></i><b>10.1.3</b> Statistical Inference in Linear Models</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="models.html"><a href="models.html#generalized-linear-models-glm"><i class="fa fa-check"></i><b>10.2</b> Generalized Linear Models (GLM)</a><ul>
<li class="chapter" data-level="10.2.1" data-path="models.html"><a href="models.html#simulating-a-glm-model"><i class="fa fa-check"></i><b>10.2.1</b> Simulating a GLM Model</a></li>
<li class="chapter" data-level="10.2.2" data-path="models.html"><a href="models.html#estimating-a-glm-model"><i class="fa fa-check"></i><b>10.2.2</b> Estimating a GLM Model</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="models.html"><a href="models.html#panel-data-models"><i class="fa fa-check"></i><b>10.3</b> Panel Data Models</a><ul>
<li class="chapter" data-level="10.3.1" data-path="models.html"><a href="models.html#simulating-panel-data-models"><i class="fa fa-check"></i><b>10.3.1</b> Simulating Panel Data Models</a></li>
<li class="chapter" data-level="10.3.2" data-path="models.html"><a href="models.html#estimating-panel-data-models"><i class="fa fa-check"></i><b>10.3.2</b> Estimating Panel Data Models</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="models.html"><a href="models.html#arima-models"><i class="fa fa-check"></i><b>10.4</b> Arima Models</a><ul>
<li class="chapter" data-level="10.4.1" data-path="models.html"><a href="models.html#simulating-arima-models"><i class="fa fa-check"></i><b>10.4.1</b> Simulating Arima Models</a></li>
<li class="chapter" data-level="10.4.2" data-path="models.html"><a href="models.html#arima-estimating"><i class="fa fa-check"></i><b>10.4.2</b> Estimating Arima Models</a></li>
<li class="chapter" data-level="10.4.3" data-path="models.html"><a href="models.html#forecasting-arima-models"><i class="fa fa-check"></i><b>10.4.3</b> Forecasting Arima Models</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="models.html"><a href="models.html#garch-models"><i class="fa fa-check"></i><b>10.5</b> Garch Models</a><ul>
<li class="chapter" data-level="10.5.1" data-path="models.html"><a href="models.html#simulating-garch-models"><i class="fa fa-check"></i><b>10.5.1</b> Simulating Garch Models</a></li>
<li class="chapter" data-level="10.5.2" data-path="models.html"><a href="models.html#estimating-garch"><i class="fa fa-check"></i><b>10.5.2</b> Estimating Garch Models</a></li>
<li class="chapter" data-level="10.5.3" data-path="models.html"><a href="models.html#forecasting-garch-models"><i class="fa fa-check"></i><b>10.5.3</b> Forecasting Garch Models</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="models.html"><a href="models.html#regime-switching-models"><i class="fa fa-check"></i><b>10.6</b> Regime Switching Models</a><ul>
<li class="chapter" data-level="10.6.1" data-path="models.html"><a href="models.html#simulating-regime-switching-models"><i class="fa fa-check"></i><b>10.6.1</b> Simulating Regime Switching Models</a></li>
<li class="chapter" data-level="10.6.2" data-path="models.html"><a href="models.html#estimating-regime-switching-models"><i class="fa fa-check"></i><b>10.6.2</b> Estimating Regime Switching Models</a></li>
<li class="chapter" data-level="10.6.3" data-path="models.html"><a href="models.html#forecasting-regime-switching-models"><i class="fa fa-check"></i><b>10.6.3</b> Forecasting Regime Switching Models</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="models.html"><a href="models.html#dealing-with-several-models"><i class="fa fa-check"></i><b>10.7</b> Dealing with Several Models</a></li>
<li class="chapter" data-level="10.8" data-path="models.html"><a href="models.html#reporting-models"><i class="fa fa-check"></i><b>10.8</b> Reporting Models with <code>texreg</code></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="research-scripts.html"><a href="research-scripts.html"><i class="fa fa-check"></i><b>11</b> Writing Research Scripts</a><ul>
<li class="chapter" data-level="11.1" data-path="research-scripts.html"><a href="research-scripts.html#structure-of-a-research-script"><i class="fa fa-check"></i><b>11.1</b> Structure of a Research Script</a></li>
<li class="chapter" data-level="11.2" data-path="research-scripts.html"><a href="research-scripts.html#folder-structure"><i class="fa fa-check"></i><b>11.2</b> Folder Structure</a></li>
<li class="chapter" data-level="11.3" data-path="research-scripts.html"><a href="research-scripts.html#ExampleResearch"><i class="fa fa-check"></i><b>11.3</b> Examples of Research Scripts</a><ul>
<li class="chapter" data-level="11.3.1" data-path="research-scripts.html"><a href="research-scripts.html#research-performance"><i class="fa fa-check"></i><b>11.3.1</b> The performance of international investments</a></li>
<li class="chapter" data-level="11.3.2" data-path="research-scripts.html"><a href="research-scripts.html#research-prophet"><i class="fa fa-check"></i><b>11.3.2</b> Can we predict stock’s returns with Prophet?</a></li>
<li class="chapter" data-level="11.3.3" data-path="research-scripts.html"><a href="research-scripts.html#research-gethfdata"><i class="fa fa-check"></i><b>11.3.3</b> An Analysis of High Frequency trade Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://sites.google.com/view/pafdr/home" target="blank">Book Companion Site</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Processing and Analyzing Financial Data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="importing" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Importing and Exporting Data from Local Files</h1>
<p>In chapter <a href="DataStructureObjects.html#DataStructureObjects">4</a>, we studied the main types of R objects and the many ways to manipulate them. In particular, we looked at <code>dataframes</code>, an efficient storage type to represent our data in a tabular format. We learned more about the types of financial data in chapter <a href="Financial-data.html#Financial-data">5</a>. In this chapter, we will study the process of importing and exporting datasets with R. In most cases of data analysis, the database will be contained in an external source, such as a local file.</p>
<div id="importing-data-from-local-files" class="section level2">
<h2><span class="header-section-number">6.1</span> Importing Data from Local Files</h2>
<p>The easiest way to import data into R is using a local file. Here, we will discuss four main formats and their file extensions: the <em>comma separated values</em> format (<em>.csv</em>), Microsoft Excel files (<em>.xls</em>, <em>.xlsx</em>), R native data (<em>.RData</em>), SQLITE (<em>.SQLITE</em>) and unstructured text files (<em>.txt</em>). These are the most common cases one will find in a data analysis situation. As with the previous chapters, all data used in the examples is publicly available in the book website.</p>
<p>Throughout this chapter, we will assume the imported files are located within a subdirectory called <code>data</code>, available in the current working directory. If you are not sure about the current working folder, just call command <code>print(getwd())</code> so it shows it in the prompt. This step is important, as you must provide the exact address of the imported file to R. If no address is informed, R assumes the file is available in the working directory. If you are not working in the same directory as your data file, you’ll need to inform its full address, as in <code>my.f &lt;- 'C:/My Data/MyData.csv'</code>. However, keeping the R script in a different root folder than the data file is not recommended.</p>
<p>Since R allows the use of relative paths, using a folder for the script and a subfolder for the data files is good policy. For example, if you are working in a script located at directory <code>C:/My Research</code> and you placed all data files inside <code>C:/My Research/data/</code>, you could first use function <code>setwd</code> at the beginning of <em>script</em> to change the directory and then use the relative path of the file, as in <code>my.f &lt;- 'data/my_data.csv'</code>, to load the information. The resulting script would look like the next code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set working directory</span>
my.d &lt;-<span class="st"> &#39;C:/My Research/&#39;</span>
<span class="kw">setwd</span>(my.d)

<span class="co"># set file to be imported</span>
my.f &lt;-<span class="st"> &#39;data/my_data.csv&#39;</span></code></pre></div>
<p>Notice how the code is self-contained and portable. If you sent the code to someone else as a compressed <em>.zip</em> file, the receiver only has to unzip the file, open the main script, change the directory in <code>my.d</code> and <em>source</em> (execute) the script. Given the relative paths were used in the rest of the code, R will be able to find all data files, and the code will run without problems.</p>
<div id="importing-data-from-a-.csv-file-comma-separated-values" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Importing Data from a <em>.csv</em> File (<em>comma separated values</em>)</h3>
<p>Consider the data file called SP500.csv, located in folder <code>data</code> from the current working directory. This file contains daily closing prices of the SP500 index from 2010-01-04 until 2017-02-28. Since SP500.csv is a simple text file, you can open it in any text editor. </p>
<p>The first lines of SP500.csv, also called header lines, shows the column names. Rows are set using line breaks, and all columns are separated by commas (<code>,</code>). This is an international standard. For some countries, the international standard is confusing, because the comma symbol can also indicate decimal values. If this is your case, my suggestion is to give preference to the international notation. Since a <em>.csv</em> file is editable, you can manually replace all commas with a point. Programs, such as Notepad and <a href="https://notepad-plus-plus.org/">Notepad++</a>, perform this task easily with <em>search and replace</em> functions. Another solution is to use the capabilities of the import function in R and set the decimal and column separator in the R code.</p>
<p>To load the contents of file SP500.csv in R, use the <code>read.csv</code> function. </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set file to read</span>
my.f &lt;-<span class="st"> &#39;data/SP500.csv&#39;</span>

<span class="co"># read file</span>
my.df.sp500 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(my.f)

<span class="co"># print it</span>
<span class="kw">print</span>(<span class="kw">head</span>(my.df.sp500))</code></pre></div>
<pre><code>##         date   price
## 1 2010-01-04 1132.99
## 2 2010-01-05 1136.52
## 3 2010-01-06 1137.14
## 4 2010-01-07 1141.69
## 5 2010-01-08 1144.98
## 6 2010-01-11 1146.98</code></pre>
<p>The contents of the imported file are set as a <code>dataframe</code> object in R. As mentioned in the previous chapter, each column of a <code>dataframe</code> has a class. We can check the class of <code>my.df.sp500</code> using functions <code>class</code> and <code>sapply</code>. The latter is a special type of function that applies a procedure to several elements of a <code>list</code> or <code>dataframe</code>. In this case, we apply function <code>class</code> to each column of <code>my.df.sp500</code>. The use of <code>sapply</code> will be detailed in the chapter <a href="programming.html#programming">9</a>. The classes of the columns are presented next.  </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print classes of all columns of my.df.sp500</span>
<span class="kw">print</span>(<span class="kw">sapply</span>(my.df.sp500, class))</code></pre></div>
<pre><code>##      date     price 
##  &quot;factor&quot; &quot;numeric&quot;</code></pre>
<p>Note that the column of dates (<code>date</code>) was imported as a <code>factor</code> vector, not as a <code>Date</code> object. This is a common mistake because, by default, function <code>read.csv</code> imports text data as factors. The problem is <code>factors</code> do not have the same properties as a <code>Date</code> object, and a bug is likely to occur once the user tries to manipulate the column.</p>
<p>The solution for the problem is simple: indicate the class of columns with the <code>colClasses</code> input, as in the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># read csv file with correct col classes</span>
my.df.sp500 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(my.f,  <span class="dt">colClasses =</span> <span class="kw">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;numeric&#39;</span>))

<span class="co"># print column classes</span>
<span class="kw">print</span>(<span class="kw">sapply</span>(my.df.sp500, class))</code></pre></div>
<pre><code>##      date     price 
##    &quot;Date&quot; &quot;numeric&quot;</code></pre>
<p>As we can see, the result is now correct. Another way to do it is to change the class of columns with the conversion functions <code>as.Date</code> and <code>as.numeric</code>:  </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load raw data</span>
my.df.sp500 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(my.f)

<span class="co"># convert columns to correct classes</span>
my.df.sp500<span class="op">$</span>date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(my.df.sp500<span class="op">$</span>date)
my.df.sp500<span class="op">$</span>price &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(my.df.sp500<span class="op">$</span>price)

<span class="co"># print column classes</span>
<span class="kw">print</span>(<span class="kw">sapply</span>(my.df.sp500, class))</code></pre></div>
<pre><code>##      date     price 
##    &quot;Date&quot; &quot;numeric&quot;</code></pre>
<p>Again, we got the desired result. As a rule of thumb, <strong>whenever data is imported into R, it is essential to verify the classes of the columns</strong>. You’ll be able to avoid many problems by simply checking the imported data.</p>
<p>Going further, function <code>read.csv</code> has several other features in addition to those presented here. Using its inputs, you can set the column names, ignore the first <code>n</code> lines of the file, among many other possibilities. In most cases, however, the direct use of the function suffices.</p>
<p>Another possibility for importing <em>.csv</em> files as <code>dataframes</code> in R is using function <code>read_csv</code> from package <code>readr</code> <span class="citation">(Wickham, Hester, and Francois <a href="#ref-readr">2016</a>)</span>. The biggest benefit of this function is it reads the data very quickly, and it uses a clever format for defining the classes of the columns. If you are dealing with many large files with several columns, using <code>readr::read_csv</code> is strongly advised. Consider the next example. </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)

<span class="co"># read file with readr::read_csv</span>
my.df.sp500 &lt;-<span class="st"> </span><span class="kw">read_csv</span>(my.f)</code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   date = col_date(format = &quot;&quot;),
##   price = col_double()
## )</code></pre>
<p>Notice how the previous code presented a message, entitled <code>Parsed with column specification:</code>. This message shows how the function set the attributes of the columns by reading the first 1000 lines of the file. We can use this information in our own code by copying the text and assigning it to a variable. Have a look:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)

<span class="co"># set cols from import message</span>
my.cols &lt;-<span class="st"> </span><span class="kw">cols</span>(<span class="dt">date =</span> <span class="kw">col_date</span>(<span class="dt">format =</span> <span class="st">&quot;&quot;</span>),
                <span class="dt">price =</span> <span class="kw">col_double</span>() ) 

<span class="co"># read file with readr::read_csv</span>
my.df.sp500 &lt;-<span class="st"> </span><span class="kw">read_csv</span>(my.f, <span class="dt">col_types =</span> my.cols)</code></pre></div>
<p>Now, let’s check the classes of the column:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print column classes</span>
<span class="kw">print</span>(<span class="kw">sapply</span>(my.df.sp500, class))</code></pre></div>
<pre><code>##      date     price 
##    &quot;Date&quot; &quot;numeric&quot;</code></pre>
<p>As expected, it looks good. Both columns have the expected format. So, a possible set of steps using <code>readr::read_csv</code> is, first, to read the file without arguments in <code>read_csv</code>, copy the default column classes from the output message, add it as argument <code>col_types</code>, and re-execute the script. This is handy when the imported file has several columns and manually defining each column class requires lots of typing.</p>
</div>
<div id="importing-data-from-an-excel-file" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Importing Data from an <em>Excel</em> File</h3>
<p>In many situations, the data to be analysed is contained in a Microsoft Excel file, with <em>.xls</em> or <em>.xlsx</em> extension. Although it is not an efficient or portable data storage format, Excel is a very popular software in finance because of it spreadsheet-like capacities. It is not uncommon for data to be stored and distributed in this format.</p>
<p>R does not have a native function for importing Excel files; therefore, we must install and use packages to perform this operation. There are several options, but the main packages are <code>XLConnect</code> <span class="citation">(Mirai Solutions GmbH <a href="#ref-xlsconnect2016">2016</a>)</span>, <code>xlsx</code> <span class="citation">(Dragulescu <a href="#ref-xlsx2014">2014</a>)</span>, <code>readxl</code> <span class="citation">(Wickham <a href="#ref-readxl2016">2016</a><a href="#ref-readxl2016">a</a>)</span> and <code>tidyxl</code> <span class="citation">(Garmonsway <a href="#ref-tidyxl">2017</a>)</span>.   </p>
<p>Although the previous cited packages have similar goals, each has its peculiarities. If reading Excel files is important to your work, I strongly advise you study the differences between these packages. For example, package <code>tidyxl</code> was specially designed to read unstructured Excel files, where the desired information is not contained in the tabular format. Package <code>XLConnect</code> allows the user to open a live connection and control an Excel file from R, making it possible to export and send data, format cells, create graphics in Excel, and more.</p>
<p>In this section, we will give priority to package <code>readxl</code>, one of the easiest and most straightforward packages to use. It also does not require the installation of external software such as <em>Java</em>. Let’s start with an example. Consider a file, called <code>SP500-Excel.xlsx</code>, that contains the same SP500 data as the previous example. We can import the information from the file using function <code>read_excel</code> from <code>readxl</code>: </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)

<span class="co"># set excel file</span>
my.f &lt;-<span class="st"> &#39;data/SP500-Excel.xlsx&#39;</span>

<span class="co"># read excel file </span>
my.df &lt;-<span class="st"> </span><span class="kw">read_excel</span>(my.f, <span class="dt">sheet =</span> <span class="st">&#39;sp500-prices&#39;</span>)

<span class="co"># print classes</span>
<span class="kw">print</span>(<span class="kw">sapply</span>(my.df, class))</code></pre></div>
<pre><code>## $date
## [1] &quot;POSIXct&quot; &quot;POSIXt&quot; 
## 
## $price
## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print with head (first five rows)</span>
<span class="kw">print</span>(<span class="kw">head</span>(my.df))</code></pre></div>
<pre><code>## # A tibble: 6 × 2
##         date   price
##       &lt;dttm&gt;   &lt;dbl&gt;
## 1 2010-01-04 1132.99
## 2 2010-01-05 1136.52
## 3 2010-01-06 1137.14
## 4 2010-01-07 1141.69
## 5 2010-01-08 1144.98
## 6 2010-01-11 1146.98</code></pre>
<p>As we can see, one of the benefits of using Excel files is the classes of the columns are taken from the classes in the Excel file. That is, if the classes are correct in Excel, then they will automatically be correct in R. In our case, the date column of file data/SP500-Excel.xlsx was correctly set as a <code>POSIXct</code> object. Likewise, even if the Excel file used commas for decimals, the import process would still be successful as the conversion is handled internally.</p>
<p>The downside of using Excel files for storing data is its low portability and the longer time required to read it. This may not be a problem for small datasets, but when handling a large volume of data, using Excel files can be very frustrating, and it is not advised.</p>
</div>
<div id="importing-data-from-a-.rdata-file" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Importing Data from a <em>.RData</em> File</h3>
<p>R has a native format to save objects from the environment to a local file with extension <em>.RData</em>. The great benefit in using this format is the saved file is compact, and its access is fast. The downside is it has low portability, i.e., it can be difficult to use the files in other software. </p>
<p>To create a new <em>.RData</em> file, use the <code>save</code> function, and to load the data file, use the <code>load</code> function. See the following example, where we create a <em>.RData</em> file with some content, clear R’s memory, and then load the previously created file:  </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set a object</span>
my.x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">100</span>

<span class="co"># set name of RData file</span>
my.file &lt;-<span class="st"> &#39;data/temp.RData&#39;</span>

<span class="co"># save it</span>
<span class="kw">save</span>(<span class="dt">list =</span> <span class="kw">c</span>(<span class="st">&#39;my.x&#39;</span>), <span class="dt">file =</span> my.file)</code></pre></div>
<p>We can verify the existence of the file with the <code>list.files</code> function: </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print contents of data folder</span>
<span class="kw">print</span>(<span class="kw">list.files</span>(<span class="st">&#39;data&#39;</span>))</code></pre></div>
<pre><code>##  [1] &quot;AdjustedPrices-InternacionalIndices.RDATA&quot;
##  [2] &quot;BovStocks_2011-12-01_2016-11-29.csv&quot;      
##  [3] &quot;BovStocks_2011-12-01_2016-11-29.RData&quot;    
##  [4] &quot;example_gethfdata.RDATA&quot;                  
##  [5] &quot;FileWithLatinChar.txt&quot;                    
##  [6] &quot;grunfeld.csv&quot;                             
##  [7] &quot;HFData.csv&quot;                               
##  [8] &quot;HFData_6_Assets_15 min.RData&quot;             
##  [9] &quot;MktIndices_and_Symbols.csv&quot;               
## [10] &quot;MySQLiteDatabase.SQLITE&quot;                  
## [11] &quot;SP500-Excel.xlsx&quot;                         
## [12] &quot;SP500-Stocks-WithRet.RData&quot;               
## [13] &quot;SP500-Stocks_long.csv&quot;                    
## [14] &quot;SP500-Stocks_wide.csv&quot;                    
## [15] &quot;SP500.csv&quot;                                
## [16] &quot;SP500_2011-11-13_2016-11-11.csv&quot;          
## [17] &quot;TDData.csv&quot;                               
## [18] &quot;temp.csv&quot;                                 
## [19] &quot;temp.RData&quot;                               
## [20] &quot;temp.txt&quot;                                 
## [21] &quot;temp.xlsx&quot;                                
## [22] &quot;temp_xts.RData&quot;</code></pre>
<p>As expected, the data/temp.RData file is available, along with several others. Now, let’s clear the memory and load the <em>.RData</em> file created in the previous step.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># clear environment</span>
<span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())

<span class="co"># load file</span>
<span class="kw">load</span>(<span class="dt">file =</span> <span class="st">&#39;data/temp.RData&#39;</span>)

<span class="co"># print all objects in environment</span>
<span class="kw">print</span>(<span class="kw">ls</span>())</code></pre></div>
<pre><code>## [1] &quot;my.x&quot;</code></pre>
<p>We can see object <code>my.x</code> was recovered, and it is available in the environment.</p>
</div>
<div id="importing-data-from-sqlite" class="section level3">
<h3><span class="header-section-number">6.1.4</span> Importing Data from SQLITE</h3>
<p>The use of <em>.csv</em> or <em>.RData</em> files for storing datasets has its limits as the size of the files increases. If you are waiting a long time to read a <code>dataframe</code> from a file, you should look for alternatives. Likewise, if you are working in a network of computers and many people are using the same data, it makes sense to keep and distribute the information from a central server. This way, every user can have access to the same information concurrently.</p>
<p>This brings us to the topic of <em>database software</em>. These specific programs usually work with a query language, called <em>SQL</em> (<em>Structured Query Language</em>). It allows the user to read portions of the data and even manipulate it efficiently. There are many options of database software that integrates nicely with R. The list includes <strong>mySQL</strong>, <strong>SQLite</strong> and <strong>MariaDB</strong>. Here, we will provide a quick tutorial on this topic, using SQLITE, which is the easiest one to work with, as it doesn’t need any server configuration.   </p>
<p>Before moving to the examples, we need to understand how to use database software. First, R will connect to the database and return a connection object. Based on this connection, we will send queries for importing data from this database using a <em>SQL</em> language. The main advantage is we can have a large database of, let’s say, 10 GB and only load a small portion of it in R. This operation is also very quick, allowing efficient access to the available tables.</p>
<p>As an example, let’s first create a SQLITE database. For that, we will set two large <code>dataframes</code> with random data and save both in a SQLITE file using package <code>RSQLite</code>. </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RSQLite)

<span class="co"># set number of rows in df</span>
N =<span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span> 

<span class="co"># create simulated dataframe</span>
my.large.df.<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">runif</span>(N), 
                            <span class="dt">G=</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&#39;A&#39;</span>,<span class="st">&#39;B&#39;</span>),
                                      <span class="dt">size =</span> N,
                                      <span class="dt">replace =</span> <span class="ot">TRUE</span>))

my.large.df.<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">runif</span>(N), 
                            <span class="dt">G =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&#39;A&#39;</span>,<span class="st">&#39;B&#39;</span>),
                                       <span class="dt">size =</span> N,
                                       <span class="dt">replace =</span> <span class="ot">TRUE</span>))

<span class="co"># set name of SQLITE file</span>
f.sqlite &lt;-<span class="st"> &#39;data/MySQLiteDatabase.SQLITE&#39;</span>

<span class="co"># open connection</span>
my.con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(<span class="dt">drv =</span> <span class="kw">SQLite</span>(), f.sqlite)

<span class="co"># write df to sqlite</span>
<span class="kw">dbWriteTable</span>(<span class="dt">conn =</span> my.con, <span class="dt">name =</span> <span class="st">&#39;MyTable1&#39;</span>, <span class="dt">value =</span> my.large.df.<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dbWriteTable</span>(<span class="dt">conn =</span> my.con, <span class="dt">name =</span> <span class="st">&#39;MyTable2&#39;</span>, <span class="dt">value =</span> my.large.df.<span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># disconnect</span>
<span class="kw">dbDisconnect</span>(my.con)</code></pre></div>
<p>The <code>TRUE</code> output of <code>dbWriteTable</code> indicates everything went well. A connection was opened using function <code>dbConnect</code>, and the <code>dataframes</code> were written to a SQLITE file, called data/MySQLiteDatabase.SQLITE. Unlike other database software, SQLITE stores data and configurations from a single file, without the need of a formal server. Also, notice how we disconnected from the database with function <code>dbDisconnect</code>.   </p>
<p>Now, let’s use the previously created file to read the tables back into R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set name of SQLITE file</span>
f.sqlite &lt;-<span class="st"> &#39;data/MySQLiteDatabase.SQLITE&#39;</span>

<span class="co"># open connection</span>
my.con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(<span class="dt">drv =</span> <span class="kw">SQLite</span>(), f.sqlite)

<span class="co"># read table</span>
my.df &lt;-<span class="st"> </span><span class="kw">dbReadTable</span>(<span class="dt">conn =</span> my.con, <span class="dt">name =</span> <span class="st">&#39;MyTable1&#39;</span>)

<span class="co"># print with str</span>
<span class="kw">print</span>(<span class="kw">str</span>(my.df))</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    1000000 obs. of  2 variables:
##  $ x: num  0.5356 0.0931 0.1698 0.8998 0.4226 ...
##  $ G: chr  &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; ...
## NULL</code></pre>
<p>It worked. The <code>dataframe</code> is exactly as expected. </p>
<p>Another example of using SQLITE is with the actual SQL statements. Notice, in the previous code, we used function <code>dbReadTable</code> to get the contents of all rows in table <code>MyTable1</code>. Now, lets use an SQL command to get only the rows where the <code>G</code> column is equal to <code>A</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set sql statement</span>
my.SQL &lt;-<span class="st"> &quot;select * from myTable2 where G=&#39;A&#39;&quot;</span>

<span class="co"># get query</span>
my.df.A &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(<span class="dt">conn =</span> my.con, <span class="dt">statement =</span> my.SQL)

<span class="co"># disconnect from db</span>
<span class="kw">dbDisconnect</span>(my.con)

<span class="co"># print with str</span>
<span class="kw">print</span>(<span class="kw">str</span>(my.df.A))</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    500154 obs. of  2 variables:
##  $ x: num  0.0064 0.4769 0.4825 0.1253 0.7501 ...
##  $ G: chr  &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...
## NULL</code></pre>
<p>It also worked as expected.</p>
<p>In this simple example, we can see how easy it is to create a connection to a database, retrieve tables, and disconnect. If you have to work with large datasets, which, in my opinion is any database that occupies more than 4 GB of your computer memory, it is worth moving it to proper database software. You’ll be able to retrieve data fast, without the need of loading the whole database in the computer’s memory. If you have a server available in your workplace, I strongly advise learning how to connect to it and use the SQL language to your advantage. There are many other ways you can query and manipulate data using SQL. Several tutorials are available in the internet.</p>
</div>
<div id="importing-data-from-a-text-file" class="section level3">
<h3><span class="header-section-number">6.1.5</span> Importing Data from a Text File</h3>
<p>In some cases, we are faced with data stored in a non-structured format, usually as raw text files. You can read the contents of a text file with function <code>readLines</code>. See next: </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set file to read</span>
my.f &lt;-<span class="st"> &#39;data/SP500.csv&#39;</span>

<span class="co"># read file line by line</span>
my.txt &lt;-<span class="st"> </span><span class="kw">readLines</span>(my.f)

<span class="co"># print first five lines</span>
<span class="kw">print</span>(my.txt[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</code></pre></div>
<pre><code>## [1] &quot;\&quot;date\&quot;,\&quot;price\&quot;&quot;     &quot;2010-01-04,1132.98999&quot; 
## [3] &quot;2010-01-05,1136.52002&quot;  &quot;2010-01-06,1137.140015&quot;
## [5] &quot;2010-01-07,1141.689941&quot;</code></pre>
<p>In this example, we imported the entire content of file <code>SP500.csv</code> as a <code>character</code> vector named <code>my.txt</code>. Each element of <code>my.txt</code> is a line of <code>SP500.csv</code>. If needed, we could write a routine to process each line, separating the columns with the <code>strsplit</code> function and saving the information of interest to another object. </p>
</div>
<div id="other-file-formats" class="section level3">
<h3><span class="header-section-number">6.1.6</span> Other File Formats</h3>
<p>Using the import functions for files with extensions <em>.csv</em>, <em>.xlsx</em> and <em>.RData</em> is sufficient in most situations. Nonetheless, it is worth noting R has specific functions for other, less popular, formats. This includes files exported from other statistical software, such as SPSS, SAS, Matlab, Eviews, among many others. If you are required to read files from different software, I suggest a thorough study of package <code>foreign</code> <span class="citation">(R Core Team <a href="#ref-RCoreTeam2015foreign">2015</a>)</span>.</p>
</div>
</div>
<div id="exporting-to-local-file" class="section level2">
<h2><span class="header-section-number">6.2</span> Exporting to Local File</h2>
<p>A very common operation in the use of R is to write data to files. Exporting data from R involves a decision regarding the format. The user must take into account three points in this decision: the resulting file size, the speed of the export process, and the compatibility with other softwares.</p>
<p>In most situations, the use of <em>.csv</em> files satisfies all points. Since it is simply a text file that can be opened and imported into any system, sharing it with others is straightforward. Moreover, the resulting <em>.csv</em> file size is not excessive. And, if the size of the generated file is large, you can compress it using the <em>zip</em> function. For these reasons, in most situations, the use of <em>.csv</em> files in importing and exporting information is preferable. However, if the user will only use R and he is not interested in portability, the next best solution is exporting the information in the <em>RData</em> format. Both options are described next.</p>
<div id="exporting-data-to-a-.csv-file" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Exporting Data to a <em>.csv</em> File</h3>
<p>To write a <em>.csv</em> file, use the <code>write.csv</code> function.  </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set the number of rows</span>
N &lt;-<span class="st"> </span><span class="dv">100</span>

<span class="co"># set dataframe</span>
my.df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">y =</span> <span class="kw">runif</span>(N), <span class="dt">z =</span> <span class="kw">rep</span>(<span class="st">&#39;a&#39;</span>,N))

<span class="co"># set file out</span>
f.out &lt;-<span class="st"> &#39;data/temp.csv&#39;</span>

<span class="co"># write to files</span>
<span class="kw">write.csv</span>(<span class="dt">x =</span> my.df, <span class="dt">file =</span> f.out)</code></pre></div>
<p>In the previous example, we save the object <code>my.df</code> into a file, called <code>temp.csv</code>, located in the <code>data</code> working directory. We can check its contents using <code>read.csv</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># read it</span>
my.df.import &lt;-<span class="st"> </span><span class="kw">read.csv</span>(f.out)

<span class="co"># print first five rows</span>
<span class="kw">print</span>(<span class="kw">head</span>(my.df.import))</code></pre></div>
<pre><code>##   X          y z
## 1 1 0.51089782 a
## 2 2 0.38012799 a
## 3 3 0.04965114 a
## 4 4 0.19958776 a
## 5 5 0.36816402 a
## 6 6 0.94310436 a</code></pre>
<p>Note that a column called <code>x</code>, containing the name/number of lines, has been added. If you do not want this new column, just set option <code>row.names = FALSE</code> as in <code>write.csv(x = my.df, file = f.out, row.names = FALSE)</code>. See the difference in the following example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set the number of rows</span>
N &lt;-<span class="st"> </span><span class="dv">100</span>

<span class="co"># set dataframe</span>
my.df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">y =</span> <span class="kw">runif</span>(N), <span class="dt">z =</span> <span class="kw">rep</span>(<span class="st">&#39;a&#39;</span>,N))

<span class="co"># set file out</span>
f.out &lt;-<span class="st"> &#39;data/temp.csv&#39;</span>

<span class="co"># write to files (without rownames)</span>
<span class="kw">write.csv</span>(<span class="dt">x =</span> my.df, <span class="dt">file =</span> f.out, <span class="dt">row.names=</span><span class="ot">FALSE</span>)

<span class="co"># check result</span>
my.df.import &lt;-<span class="st"> </span><span class="kw">read.csv</span>(f.out)
<span class="kw">print</span>(<span class="kw">head</span>(my.df.import))</code></pre></div>
<pre><code>##           y z
## 1 0.9141985 a
## 2 0.9240226 a
## 3 0.8307530 a
## 4 0.2948835 a
## 5 0.5214990 a
## 6 0.4476653 a</code></pre>
<p>As we can see, the row numbers are no longer saved as a column in the <em>.csv</em> file.</p>
</div>
<div id="exporting-data-to-a-rdata-file" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Exporting Data to a <em>RData</em> File</h3>
<p>The native solution for exporting R objects is function <code>save</code>. It usage is simple; just name the objects to save and the name of the local file. Have a look:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set random data</span>
my.x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>)
my.df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">y =</span> <span class="kw">runif</span>(<span class="dv">100</span>),
                    <span class="dt">z =</span> <span class="kw">runif</span>(<span class="dv">100</span>))

my.f &lt;-<span class="st"> &#39;data/temp.RData&#39;</span>
<span class="kw">save</span>(<span class="dt">list =</span> <span class="kw">c</span>(<span class="st">&#39;my.x&#39;</span>, <span class="st">&#39;my.df&#39;</span>),
     <span class="dt">file =</span> my.f)</code></pre></div>
<p>After saving it, the contents of file data/temp.RData includes objects <code>my.df</code> and <code>my.x</code>. A note here is important. If you are saving custom classes of objects into a <em>.RData</em> file, you must first load the package before reading the file. Otherwise, R will not understand the custom format.</p>
</div>
<div id="exporting-data-to-an-excel-file" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Exporting Data to an Excel File</h3>
<p>Exporting a <code>dataframe</code> to an Excel file is also easy. Again, there is no native function in R that performs this procedure. We can, however, use package <code>xlsx</code>. A requisite for using this package is the installation of Java in the operating system. For Windows users, visit the <a href="https://www.java.com/pt_BR/">Java site</a> and install the software. After that, install <code>xlsx</code> with command <code>install.packages('xlsx')</code> and try loading it with <code>library(xlsx)</code>. If you got an error message about <em>Java</em> , try rebooting your system. </p>
<p>An example of usage is given next.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(xlsx)

<span class="co"># create dataframe</span>
N &lt;-<span class="st"> </span><span class="dv">50</span>
my.df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">y =</span> <span class="kw">seq</span>(<span class="dv">1</span>,N), <span class="dt">z =</span> <span class="kw">rep</span>(<span class="st">&#39;a&#39;</span>,N))

<span class="co"># set excel file</span>
f.out &lt;-<span class="st"> &#39;data/temp.xlsx&#39;</span>

<span class="co"># write to excel</span>
<span class="kw">write.xlsx</span>(<span class="dt">x =</span> my.df, <span class="dt">file =</span> f.out, <span class="dt">sheetName =</span> <span class="st">&quot;my df&quot;</span>)</code></pre></div>
<p>If you want to save several <code>dataframes</code> into several worksheets of the same Excel file, you must use input option <code>append=TRUE</code> in the call to <code>write.xlsx</code>. Otherwise, the function will create a new file on each call and erase all previous content. See the following example, where we export two <em>dataframes</em> for two different sheets in the same Excel file: </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create two dataframes</span>
N &lt;-<span class="st"> </span><span class="dv">25</span>
my.df.A &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">y =</span> <span class="kw">seq</span>(<span class="dv">1</span>,N), 
                      <span class="dt">z =</span> <span class="kw">rep</span>(<span class="st">&#39;a&#39;</span>,N))

my.df.B &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">z =</span> <span class="kw">rep</span>(<span class="st">&#39;b&#39;</span>,N))

<span class="co"># set file out</span>
f.out &lt;-<span class="st"> &#39;data/temp.xlsx&#39;</span>

<span class="co"># write in different sheets</span>
<span class="kw">write.xlsx</span>(<span class="dt">x =</span> my.df.A, 
           <span class="dt">file =</span> f.out, 
           <span class="dt">sheetName =</span> <span class="st">&quot;my df A&quot;</span>)

<span class="kw">write.xlsx</span>(<span class="dt">x =</span> my.df.B, 
           <span class="dt">file =</span> f.out, 
           <span class="dt">sheetName =</span> <span class="st">&quot;my df B&quot;</span>, 
           <span class="dt">append =</span> <span class="ot">TRUE</span> )</code></pre></div>
</div>
<div id="exporting-data-to-a-text-file" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Exporting Data to a Text File</h3>
<p>In some situations, you may need to export an output to a file, for example, when you need to save the log record of a procedure, or when you need to record information in a specific format not supported by R. This procedure is quite simple. Using function <code>cat</code>, use input <code>file</code> to set the name of the local file. All the text supplied in function <code>cat</code> will be written in the corresponding text file. See next: </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set file</span>
my.f &lt;-<span class="st"> &#39;data/temp.txt&#39;</span>

<span class="co"># set some string</span>
my.str &lt;-<span class="st"> </span><span class="kw">paste</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>, <span class="dt">collapse =</span> <span class="st">&#39;&#39;</span>)

<span class="co"># save string to file</span>
<span class="kw">cat</span>(my.str, <span class="dt">file =</span> my.f, <span class="dt">append =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>In the previous example, we created a text object with the first five letters of the alphabet, separated by the symbol <code>\n</code>, which indicates a line break. We then execute a call to <code>cat</code> with arguments <code>file</code> and <code>append</code>. The latter sets the option to add new text to the end of the file or not. We can check the result with the <code>readLines</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">readLines</span>(my.f))</code></pre></div>
<pre><code>## [1] &quot;a &quot; &quot;b &quot; &quot;c &quot; &quot;d &quot; &quot;e &quot;</code></pre>
<p>As we can see, it worked as expected.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-readr">
<p>Wickham, Hadley, Jim Hester, and Romain Francois. 2016. <em>Readr: Read Tabular Data</em>. <a href="https://CRAN.R-project.org/package=readr" class="uri">https://CRAN.R-project.org/package=readr</a>.</p>
</div>
<div id="ref-xlsconnect2016">
<p>Mirai Solutions GmbH. 2016. <em>XLConnect: Excel Connector for R</em>. <a href="https://CRAN.R-project.org/package=XLConnect" class="uri">https://CRAN.R-project.org/package=XLConnect</a>.</p>
</div>
<div id="ref-xlsx2014">
<p>Dragulescu, Adrian A. 2014. <em>Xlsx: Read, Write, Format Excel 2007 and Excel 97/2000/Xp/2003 Files</em>. <a href="https://CRAN.R-project.org/package=xlsx" class="uri">https://CRAN.R-project.org/package=xlsx</a>.</p>
</div>
<div id="ref-readxl2016">
<p>Wickham, Hadley. 2016a. <em>Readxl: Read Excel Files</em>. <a href="https://CRAN.R-project.org/package=readxl" class="uri">https://CRAN.R-project.org/package=readxl</a>.</p>
</div>
<div id="ref-tidyxl">
<p>Garmonsway, Duncan. 2017. <em>Tidyxl: Read Untidy Excel Files</em>. <a href="https://CRAN.R-project.org/package=tidyxl" class="uri">https://CRAN.R-project.org/package=tidyxl</a>.</p>
</div>
<div id="ref-RCoreTeam2015foreign">
<p>R Core Team. 2015. <em>Foreign: Read Data Stored by Minitab, S, Sas, Spss, Stata, Systat, Weka, dBase, ...</em> <a href="https://CRAN.R-project.org/package=foreign" class="uri">https://CRAN.R-project.org/package=foreign</a>.</p>
</div>
</div>
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://pafdr.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="Financial-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importingInternet.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "Sepia",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
